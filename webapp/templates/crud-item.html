<div ng-show="edit == true || vm.list.length > 0">
	<hr/>
	<h3>{{vm.title}}</h3>
</div>
      
<form id="{{vm.formId}}" name="{{vm.formId}}" class="form-horizontal" role="form" ng-show="edit == true">
    <div ng-show="displayError" class="alert alert-danger">
        <strong>Error!</strong> Something broke. Retry, or cancel and start afresh.
    </div>
    
    <div ng-repeat="field in vm.fields" class="form-group" ng-class="{'has-error': {{vm.formId}}.{{field}}.$invalid}">
        <label for="{{field}}" class="col-sm-2 control-label">{{vm.labels[$index]}}</label>
        <div ng-if="vm.listService[$index] != null" id="{{field}}Controls" class="col-sm-10">
	    	<input type="text" name="{{field}}" id="{{field}}" ng-model="vm.item[field]" uib-typeahead="uibItem for uibItem in vm.listService[$index].listStr | filter:$viewValue | limitTo:100" class="form-control">
        </div>
        <div ng-if="vm.listService[$index] == null" id="{{field}}Controls" class="col-sm-10">
            <input type="text" name="{{field}}" id="{{field}}" ng-model="vm.item[field]" class="form-control"></input>
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button id="add" name="add" class="btn btn-primary" ng-disabled="isClean() || {{vm.formId}}.$invalid" ng-click="vm.save()"><span class="glyphicon glyphicon-plus-sign"></span> Add</button>
        </div>
    </div>
</form>

<div id="crud-table-item-{{vm.restName}}" ng-show="vm.list.length > 0">
    <div class="table-responsive">
        <table class="table table-responsive table-bordered table-striped clearfix">
            <thead>
                <tr>
                    <th></th>
                    <th ng-repeat="label in vm.labels">{{label}}</th>
                </tr>
            </thead>
            <tbody id="crud-table-item-body-{{vm.restName}}">
                <tr ng-repeat="result in vm.list | startFrom:vm.pagination.currentPage*vm.pagination.pageSize | limitTo:vm.pagination.pageSize">
                    <td>
                    	<a ng-if="edit == true" href ng-click="vm.remove(result)">/ <span class="glyphicon glyphicon-trash"></span> Delete</a>
                    </td>
                    <td ng-repeat="field in vm.fields">
                    	<a href="{{vm.goToField(result, field, $index, edit)}}">{{vm.getValue(result, field, $index)}}</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <ul class="pagination pagination-centered" ng-show="vm.pagination.numPages > 1">
        <li ng-class="{disabled:vm.pagination.currentPage == 0}">
            <a id="prev" href ng-click="vm.pagination.previous()">«</a>
        </li>
        <li ng-repeat="n in vm.pagination.pageRange" ng-class="{active:vm.pagination.currentPage == n}" ng-click="vm.pagination.setPage(n)">
            <a href ng-bind="n + 1">1</a>
        </li>
        <li ng-class="{disabled: vm.pagination.currentPage == (vm.pagination.numPages - 1)}">
            <a id="next" href ng-click="vm.pagination.next()">»</a>
        </li>
    </ul>
</div>
